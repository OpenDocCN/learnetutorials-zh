<html>
<head>
<title>Python memoryview()</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>Python 内存视图()</h1>
<blockquote>原文:<a href="https://learnetutorials.com/python/methods/memoryview">https://learnetutorials.com/python/methods/memoryview</a></blockquote>&#13;
                         &#13;
                        <p>内置函数 memoryview()用于返回给定对象的内存视图对象。内存视图是在 Python 中公开缓冲协议的更好方法。通过创建内存视图对象，它允许您访问对象的内部缓冲区。缓冲区协议有助于访问对象的内部数据，内部数据可以是内存数组或缓冲区。</p>

<div class="syntax">
<pre>
<code class="python">
<strong>memoryview(obj)</strong> # Where obj can be a byte or bytearray
 </code>
</pre>
</div>
<h2>内存视图()参数:</h2>

<p>只接受一个参数。这里 obj 将支持缓冲协议(字节，字节数组)。</p>

<table>
 <thead>
  <tr>
   <th scope="col">参数</th>
   <th scope="col">描述</th>
   <th scope="col">必需/可选</th>
  </tr>
 </thead>
 <tbody>
  <tr>
   <td>目标文件</td>
   <td>要公开其内部数据的对象</td>
   <td>需要</td>
  </tr>
 </tbody>
</table>

<h2>memoryview()返回值</h2>

<p>我们还可以在内存视图中更新对象。</p>

<table>
 <tbody>
  <tr>
   <th>投入</th>
   <th>返回值</th>
  </tr>
  <tr>
   <td>目标文件</td>
   <td>内存视图对象</td>
  </tr>
 </tbody>
</table>

<h2>Python 中 memoryview()方法的示例</h2>

<div class="code-example">
<h3>示例 memoryview()在 Python 中是如何工作的？</h3>

<pre>
<code class="python">
#random bytearray
random_byte_array = bytearray('ABC', 'utf-8')

mv = memoryview(random_byte_array)

# access memory view's zeroth index
print(mv[0])

# create byte from memory view
print(bytes(mv[0:2]))

# create list from memory view
print(list(mv[0:3]))
 </code>
</pre>
</div>

<p><strong>输出:</strong></p>

<div class="output">
<pre>
<samp>65
b'AB'
[65, 66, 67]</samp></pre>
</div>

<div class="code-example">
<h3>示例 2:使用内存视图修改内部数据</h3>

<pre>
<code class="python">
# random bytearray
random_byte_array = bytearray('ABC', 'utf-8')
print('Before updation:', random_byte_array)

mv = memoryview(random_byte_array)

# update 1st index of mv to Z
mv[1] = 90
print('After updation:', random_byte_array)
 </code>
</pre>
</div>

<p><strong>输出:</strong></p>

<div class="output">
<pre>
<samp>Before updation: bytearray(b'ABC')
After updation: bytearray(b'AZC')
</samp></pre>
</div>

<div class="code-example">
<h3>示例 3:在内存视图中更新对象。</h3>

<pre>
<code class="python">
barr = bytearray('Python','utf-8')
mv = memoryview(barr)
print(type(mv))
mv[0] = 65
print(barr)
 </code>
</pre>
</div>

<p><strong>输出:</strong></p>

<div class="output">
<pre>
<samp>bytearray(b'Aython')
</samp></pre>
</div>
                        
</body>
</html>